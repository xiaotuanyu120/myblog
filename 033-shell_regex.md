---
title: shell正则：贪婪匹配引起的问题
date: 2016-07-27 16:13:00
categories: shell
tags: [shell,sed,正则表达式]

---
## 正则中贪婪匹配容易产生的问题

**需求**
去除文档内的所有第一个#之前的字符

**分析**
可以用sed的替换，来将第一个#之前的字符串匹配成空

**核心语句**
错误写法：
``` bash
# 这种简单的情况可以应对
echo "something# content"|sed  's/^.*#/#/g'
# content

# 多个"#"的情况就不可以了
echo "something# content#"|sed 's/^.*#/#/g'
#
# 可以看出结果并不是我们想要的
```
其实这牵扯到正则匹配的贪婪匹配，总是尝试去匹配更多的内容

正确写法：
``` bash
# 为了解决贪婪匹配的问题，可以将.这个匹配所有单个字符的替换为[^#]，这样就是相当于匹配出来的字符全部为非#字符，以达到我们的目地
echo "something# content#"|sed 's/^[^#]*#/#/g'
# content#
```